{% extends 'base.html' %} <!--extend from base.html-->

{% block content %} <!--replace "block content" section in base.html-->
<head>
	<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
	<title>Chartjs Charts</title>
</head>

<body>
	<div style="height: 50vh; width: 50%;">
		<canvas id="myChart"></canvas>
	</div>

    <script>
        // Ensure JSON is properly embedded
        const chartLabels = {{ labels | tojson | safe }};
        const totalBalances = {{ total_balances | tojson | safe }};
        const totalExpenses = {{ total_expenses | tojson | safe }};
        const totalIncomes = {{ total_incomes | tojson | safe }};

        const data = {
            labels: chartLabels,
            datasets: [
                {
                    label: 'Balance',
                    backgroundColor: 'rgb(255, 99, 132)',
                    borderColor: 'rgb(255, 99, 132)',
                    data: totalBalances,
                },
                {
                    label: 'Expenses',
                    backgroundColor: 'rgb(99, 255, 132)',
                    borderColor: 'rgb(99, 255, 132)',
                    data: totalExpenses,
                },
                {
                    label: 'Income',
                    backgroundColor: 'rgb(132, 99, 255)',
                    borderColor: 'rgb(132, 99, 255)',
                    data: totalIncomes,
                },
            ]
        };

        const config = {
            type: 'line',
            data: data,
            options: { maintainAspectRatio: false }
        };

        new Chart(document.getElementById('myChart'), config);

    </script>

    
</body>
</html>
{% endblock %}