<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Finance App</title>
    <link rel="stylesheet" href="../static/css/styles.css">
    
</head>
<body>
    <div class="dashboard">
        <h1>Personal Finance App</h1>
            <h2>Dashboard</h2>

        <!-- Main Content -->
        <main class="content">
            <header>
                <div class="user">
                    <img src="assets/user-avatar.png" alt="User">
                    <h3>Bruce Wayne</h3>
                    <p>wayne@gmail.com</p>
                </div>
                
            </header>

            <!-- Dashboard Stats -->
            <section class="stats">
                <div class="stat-box">
                    <h4>Total Balance</h4>
                    <p>${{totals[0]}}</p>
                    <span class="increase">+ $17,938 (13%)</span>
                    
                </div>
                <div class="stat-box">
                    <h4>Total Expense</h4>
                    <p>${{totals[1]}}</p>
                    <span class="decrease">- $17,398 (16%)</span>
                    
                </div>
                <div class="stat-box">
                    <h4>Total Income</h4>
                    <p>${{totals[2]}}</p>
                    <span class="increase">+ $10,398 (13%)</span>
                    
                </div>
            </section>

            <!-- Transaction Form -->
            <section class="transaction-form">
                <h3>Enter Transaction</h3>
                {% if session_vars["submit_successful"] == True %}
                <form action="/submit" method="post">
                    <label for="date">Date:</label>
                    <input type="text" id="date" name="date" required>

                    <label for="amount">Amount:</label>
                    <input type="text" id="amount" name="amount" required>
                  
                    <label for="category">Category:</label>
                    <input type="text" id="category" name="category" required>

                    <label for="memo">Memo:</label>
                    <input type="text" id="memo" name="category">
            
                    <button type="submit">Submit</button>
                </form>
                {% else %}
                <form action="/submit" method="post">
                    <label for="date">Date:</label>
                    <input type="text" id="date" name="date" value="{{session_vars['session_date']}}" required>

                    <label for="amount">Amount:</label>
                    <input type="text" id="amount" name="amount" value="{{session_vars['session_amount']}}" required>
                  
                    <label for="category">Category:</label>
                    <input type="text" id="category" name="category" value="{{session_vars['session_category']}}" required>

                    <label for="memo">Memo:</label>
                    <input type="text" id="memo" name="memo" value="{{session_vars['session_memo']}}">
            
                    <button type="submit">Submit</button>
                </form>
                {% endif %}
            </section>
            
            <!-- Transaction Table -->
            <section class="transactions">
                <h3>Recent Transactions</h3>
                <table>
                    <tr>
                        <th>User</th>
                        <th>Date</th>
                        <th>Amount</th>
                        <th>Category</th>
                        <th>Memo</th>

                    </tr>
                    <!--For loop for pulling transactions from db-->
                    {% for transaction in trans_list %}
                    <tr>
                        <td>Jim Gorden</td>
                        <!--format date-->
                        {% if transaction[3][5] == "1" %}
                            <td> {{transaction[3][5:7] + "/" + transaction[3][8:11] + "/" + transaction[3][0:4]}}</td>
                        {% else %}
                            <td> {{transaction[3][6:7] + "/" + transaction[3][8:11] + "/" + transaction[3][0:4]}}</td>
                        {% endif %}
                        <!--add zero to end of amount if it should end in one-->
                        {% if (transaction[1] | string)[transaction[1] | string | length - 2 ] == "." %}
                            <td>${{transaction[1]}}0</td>
                        {% else %}
                            <td>${{transaction[1]}}</td>
                        {% endif %}
                        <td>{{transaction[2].title()}}</td>
                        <td>{{transaction[4]}}</td>
                    </tr>
                    {% endfor %}
                    <tr>
                        <td>Jim Gorden</td>
                        <td>12/02/2024</td>
                        <td>$340</td>
                        <td>water</td>
                        <td>Case of water</td>

                    </tr>
                    <tr>
                        <td>Jim Gorden</td>
                        <td>12/02/2024</td>
                        <td>$199</td>
                        <td>phone bill</td>
                        <td>Paid on the 15th</td>
                    </tr>
                    <tr>
                        <td>Jim Gorden</td>
                        <td>12/02/2024</td>
                        <td>$240</td>
                        <td>utility bill</td>
                        <td>Paid on the 1st</td>
                    </tr>
                </table>
            </section>

        </main>
    </div>

    
</body>
</html>